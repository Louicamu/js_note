<script>
    function promiseAll(promises){
        return new Promise(function(resolve,reject){
            if(!Array.isArray(promises)){
                throw new TypeError('not an array')
            }
            var promiseNum=promises.length
            var resolvedResult=[]
            var counter=0
            for(let i=0;i<promiseNum;i++){
                Promise.resolve(promises[i]).then((value)=>{
                    counter++
                    resolvedResult[i]=value
                    if(resolvedResult==promiseNum){
                        return resolve(resolvedResult)
                    }
                },error=>{
                    return reject(error)
                })
            }
        })
    }
</script>