<script>
    function promiseAllSettled(promises){
        return Promise.all(promise.map((p)=>{
            Promise.resolve(p).then(
                value=>({status:'fulfilled',value}),
                reason=>({status:'rejected'},error)
            )
        }))
    }
</script>