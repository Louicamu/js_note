<script>
    class emitter{
        constructor(){
            this.arrayList={}
        }
        on(name,fn){
            if(this.arrayList[name]&&!this.arrayList[name].includes(fn)){
                this.arrayList[name].push(fn)
            }else{
                this.arrayList[name]=[fn]
            }
        }
        off(name,fn){
            if(this.arrayList[name]){
                let idx=indexOf(this.arrayList[name])
                this.arrayList[name].splice(idx,1)
            }
        }
        emit(name,...args){
            if(this.arrayList[name]){
                let tasks=[...this.arrayList[name]]
                for(const c of tasks){
                    c.apply(this,...args)
                }
            }
        }
    }
</script>